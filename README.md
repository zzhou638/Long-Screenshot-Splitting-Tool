# Screenshot Software

一个面向长截图处理的前端工具，支持桌面端与移动端。  
核心目标是：快速把一张长图按需求切分成多张图片，并批量导出。

## 1. 功能概览

### 1.1 通用能力
- 支持上传图片（文件选择、拖拽上传）。
- 支持长图预览与滚动浏览。
- 支持按裁剪线切分为多个片段。
- 支持批量导出 PNG 图片。
- 更换图片后自动重置裁剪状态，避免旧数据干扰。

### 1.2 桌面端功能
- `Ctrl + 滚轮` 缩放预览图。
- 自由裁剪：点击图片添加裁剪线。
- 等比例裁剪：输入切分数量，自动生成裁剪线。
- 裁剪线支持右键删除。
- 右侧实时裁剪预览列表。
- 下载时优先使用 File System Access API 选择目标目录，失败时回退到浏览器下载。

### 1.3 移动端功能
- 触屏适配布局：主预览区 + 底部工具栏。
- 双指捏合缩放 + 按钮缩放（`+ / - / 重置`）。
- 自由裁剪：单击图片添加裁剪线。
- 等比例裁剪：输入切分数量后自动生成裁剪线。
- 裁剪线长按呼出操作面板，可删除裁剪线。
- “保存到相册”优先：
  - 先尝试 Web Share（系统分享，可保存到相册）。
  - 保存失败时自动回退到本地下载（目录保存或浏览器下载）。

## 2. 技术栈

- Vue 2.6
- Vue Router 3
- Vue CLI 5
- Canvas API（图片切分）
- File System Access API（支持时用于目录写入）
- Web Share API（移动端优先保存到相册）

## 3. 路由与终端适配

- `/desktop`：桌面端页面
- `/mobile`：移动端页面
- `/`：根据 `userAgent` 自动跳转到桌面或移动页面

## 4. 项目结构（核心）

```text
src/
  router/
    index.js              # 路由与终端跳转逻辑
  views/
    DesktopHome.vue       # 桌面端长图裁剪页面
    MobileHome.vue        # 移动端长图裁剪页面
```

## 5. 本地开发

### 5.1 安装依赖

```bash
npm install
```

### 5.2 启动开发环境

```bash
npm run serve
```

### 5.3 生产构建

```bash
npm run build
```

### 5.4 代码检查

```bash
npm run lint
```

## 6. 使用说明

### 6.1 基本流程
1. 上传一张长截图。
2. 选择裁剪模式：
   - 自由裁剪：手动添加裁剪线。
   - 等比例裁剪：输入等分数量。
3. 预览切分结果。
4. 导出图片（桌面端“下载图片”/移动端“保存到相册”）。

### 6.2 裁剪规则
- 裁剪线按照从上到下排序。
- 每两条相邻裁剪线之间为一个片段。
- 最后一条裁剪线到底部会自动作为最后一个片段导出。

## 7. 浏览器兼容性与限制

- 基础功能（上传、预览、裁剪、Canvas 导出）在现代浏览器可用。
- `showDirectoryPicker` 仅在支持的浏览器/环境可用（通常要求安全上下文）。
- `Web Share API`、`navigator.canShare` 对浏览器和系统版本有要求：
  - 支持时可触发系统分享并保存到相册。
  - 不支持或调用失败时会自动回退到本地下载。

## 8. 后续可扩展方向

- 裁剪线拖动微调。
- 裁剪模板（固定比例预设）。
- 导出文件命名规则配置（前缀、起始序号、位数）。
- ZIP 打包下载。

## 9. 参考

- Vue CLI 配置文档：[Configuration Reference](https://cli.vuejs.org/config/)
